> æœ¬æ–‡å·²æ”¶å½•äºï¼š[https://github.com/danmuking/all-in-one](https://github.com/danmuking/all-in-one)

å“ˆå–½ï¼Œå¤§å®¶å“ˆï¼Œæˆ‘æ˜¯ **DanMu**ã€‚æœ€è¿‘åœ¨åœ¨å­¦ä¹ ä¸€äº›åˆ†å¸ƒå¼çš„çŸ¥è¯†ï¼Œåœ¨ç½‘ä¸Šçœ‹äº†ä¸å°‘åˆ†å¸ƒå¼çš„æ–‡ç« ï¼Œä½†æ€»è§‰å¾—å®ƒä»¬è¦ä¹ˆå¤ªè¿‡ä¸“ä¸šï¼Œçœ‹äº†ç­‰äºæ²¡çœ‹ï¼Œå­¦äº†ç­‰äºæ²¡å­¦ï¼Œè¦ä¹ˆå°±è¿‡äºç®€åŒ–ï¼Œçœ‹äº†è¿˜æ˜¯ç­‰äºæ²¡çœ‹ï¼Œå­¦äº†è¿˜æ˜¯ç­‰äºæ²¡å­¦ã€‚æƒ³è¦æ‰¾åˆ°ä¸€ç¯‡æ—¢æ˜“æ‡‚åˆæ·±å…¥çš„åˆ†å¸ƒå¼æ–‡ç« ç¡®å®ä¸æ˜“ã€‚æ—¢ç„¶ç½‘ç»œä¸Šçš„èµ„æºæ— æ³•æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæˆ‘å†³å®šäº²è‡ªä¸‹åœºï¼Œä¸ºå¤§å®¶å¸¦æ¥è¿™ç¯‡æ·±å…¥åˆ†æ`Raft`åˆ†å¸ƒå¼å…±è¯†ç®—æ³•çš„æ–‡ç« ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ å°†èƒ½å¤Ÿæ·±å…¥ç†è§£Raftçš„ç²¾é«“ï¼ŒæŒæ¡å…¶èƒŒåçš„åŸç†å’Œæœºåˆ¶ã€‚æ‹’ç»â€œå¦‚ä¼šâ€ï¼Œä»æˆ‘åšèµ·ï¼ŒLet's goã€‚
![image.png](https://raw.githubusercontent.com/danmuking/image/main/3224e68ce8aa5fcc8c1ac901da1e94b5.png)
## ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼å…±è¯†ç®—æ³•
åœ¨ä¼ ç»Ÿçš„å•ä½“ç³»ç»Ÿä¸­ï¼Œé€šå¸¸åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹è´Ÿè´£å®Œæˆç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹æŸä¸ªæ•°æ®ï¼Œåªéœ€è¦è€ƒä¿®æ”¹å•ä¸ªèŠ‚ç‚¹çš„æ•°æ®ã€‚ä½†æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå½“ä¸­ï¼ŒåŒä¸€ä»½æ•°æ®å¯èƒ½ä¼šåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸­å­˜åœ¨å¤šä¸ªå‰¯æœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¿®æ”¹æ•°æ®å°±æ¶‰åŠåˆ°å¤šä¸ªèŠ‚ç‚¹çš„æ“ä½œã€‚ç”±äºå¤šèŠ‚ç‚¹æ“ä½œå¾ˆéš¾ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œæ‰€ä»¥åœ¨æŸä¸€ä¸ªæ—¶åˆ»ï¼Œä¸åŒèŠ‚ç‚¹ä¸­çš„æ•°æ®å¯èƒ½å­˜åœ¨ä¸ä¸€è‡´ï¼Œè¦å¦‚ä½•ä¿è¯å¤šä¸ªèŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´æ€§ï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼å…±è¯†ç®—æ³•çš„ä½œç”¨ã€‚
æ€»ç»“ä¸€ä¸‹ï¼Œ**åˆ†å¸ƒå¼å…±è¯†ç®—æ³•ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ä¿è¯åŒä¸€ä»½æ•°æ®åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šçš„ä¸€è‡´æ€§ï¼Œä»¥æ»¡è¶³**`**CP**`**è¦æ±‚ã€‚**
> å¦‚æœä¸äº†è§£ä»€ä¹ˆæ˜¯`CP`å¯ä»¥çœ‹[è¿™ç¯‡æ–‡ç« ](http://150.158.151.30/archives/xrrx9p6c3fsqlzvb)

> å…±è¯†ï¼ˆConsensusï¼‰ä¸ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰çš„åŒºåˆ«ï¼šä¸€è‡´æ€§æ˜¯æŒ‡æ•°æ®ä¸åŒå‰¯æœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œè€Œå…±è¯†æ˜¯æŒ‡è¾¾æˆä¸€è‡´æ€§çš„æ–¹æ³•ä¸è¿‡ç¨‹ã€‚ç”±äºç¿»è¯‘çš„å…³ç³»ï¼Œå¾ˆå¤šä¸­æ–‡èµ„æ–™æŠŠ Consensus åŒæ ·ç¿»è¯‘ä¸ºä¸€è‡´æ€§ï¼Œå¯¼è‡´ç½‘ç»œä¸Šå¤§é‡çš„â€œäºŒæ‰‹ä¸­æ–‡èµ„æ–™â€å°†è¿™ä¸¤ä¸ªæ¦‚å¿µæ··æ·†èµ·æ¥ï¼Œå¦‚æœä½ åœ¨ç½‘ä¸Šçœ‹åˆ°â€œåˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•â€ï¼Œåº”æ˜ç™½å…¶æŒ‡çš„å…¶å®æ˜¯â€œDistributed Consensus Algorithmâ€ã€‚

## `Raft`ç®—æ³•
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦è¿›å…¥ä»Šå¤©çš„ä¸»é¢˜ï¼Œ`Raftç®—æ³•`ï¼Œå…ˆç”¨ä¸€å¼ å›¾ç‰‡æ¥ç²—ç•¥è®¤è¯†ä¸€ä¸‹`Raftç®—æ³•`ï¼š
![Raft.drawio.svg](https://raw.githubusercontent.com/danmuking/image/main/604036eceb3a30c73743149ab73575ef.svg)
è¿™å¼ å›¾ç‰‡å¤§è‡´æè¿°äº†`Raft`å·¥ä½œçš„åŸºæœ¬æµç¨‹ï¼Œå®¢æˆ·ç«¯å‘`Leader`å‘é€å‘½ä»¤ï¼Œç„¶åç”±`Leader`å°†çŠ¶æ€åŒæ­¥åˆ°æ‰€æœ‰çš„`Follower`ä¸­ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å®¢æˆ·ç«¯åªä¼šä¸`Leader`è¿›è¡Œäº¤äº’ï¼Œæ•°æ®åªä¼šå•å‘ç”±`Leader`æµå‘`Follower`ã€‚`Raft`çš„å¤§è‡´æµç¨‹è¿˜æ˜¯ç›¸å½“ç®€å•çš„ï¼Œåˆ«æ€¥ï¼Œè¿™æ‰æ˜¯å¼€å§‹ï¼Œæ¥ä¸‹æ¥ï¼Œæ­£å¼è¿›å…¥`Raft`ç®—æ³•è¯¦è§£ã€‚
### `Raft`ä¸­çš„è§’è‰²
åœ¨`Raft`ç®—æ³•ä¸­ï¼Œä¸€å…±å­˜åœ¨ä¸‰ç§è§’è‰²ï¼Œåˆ†åˆ«æ˜¯`Leader`ã€`Follower`ä»¥åŠ`Candidate`ã€‚è¿™äº›è§’è‰²å„è‡ªæ‰®æ¼”ç€ä¸åŒçš„ä½œç”¨ï¼Œå¹¶åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è¿›è¡Œè½¬æ¢ã€‚

- `**Leader**`ï¼š`**Leader**`**è´Ÿè´£å¤„ç†æ‰€æœ‰çš„å®¢æˆ·ç«¯è¯·æ±‚**ï¼›å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯å‘`Follower`å‘èµ·è¯·æ±‚ï¼Œåè€…ä¼šå°†å®ƒé‡å®šå‘åˆ°`Leader`ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¸­**æœ‰ä¸”åªæœ‰ä¸€ä¸ª**`**Leader**`ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯`Follower`ã€‚`Leader`ä¼šä¸æ–­åœ°å‘`Follower`å‘é€å¿ƒè·³ä¿¡æ¯ä»¥ç»´æŠ¤å…¶é¢†å¯¼åœ°ä½ï¼Œå¹¶ç¡®ä¿é›†ç¾¤çš„ç¨³å®šæ€§ã€‚
- `**Candidate**`ï¼š`Candidate`æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è§’è‰²ï¼Œåœ¨æ­£å¸¸è¿è¡Œæ˜¯ä¸ä¼šå‡ºç°ï¼Œ**ä¸»è¦ç”¨äºåœ¨é›†ç¾¤ä¸­çš„**`**Leader**`**ä¸‹çº¿æ—¶é€‰å‡ºé‡æ–°é€‰å‡º**`**Leader**`**ã€‚**
- `**Follower**`ï¼š`**Follower**`** éƒ½æ˜¯è¢«åŠ¨çš„çš„è§’è‰²**ï¼Œå®ƒä»¬**ä¸ä¼šä¸»åŠ¨å‘å‡ºè¯·æ±‚**ï¼Œåªä¼šç®€å•å“åº”æ¥è‡ª`**Leader**`å’Œ `**Candidate**`çš„è¯·æ±‚ã€‚

åœ¨ä»»æ„æ—¶åˆ»ï¼Œ`Raft`ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¤„äºæ€»æ˜¯å¤„äº**ä¸‰ç§è§’è‰²**ä¹‹ä¸€ï¼Œè¿™ä¸‰ç§è§’è‰²ä¹‹é—´çš„è½¬æ¢å…³ç³»æ˜¯è¿™æ ·çš„
![Raft-ç¬¬ 2 é¡µ.drawio.svg](https://raw.githubusercontent.com/danmuking/image/main/3c46c6c84495fa406c5882e2eb909d13.svg)

- å¦‚æœä¸€ä¸ª`Follower`æŸæ®µæ—¶é—´å†…æ”¶ä¸åˆ°`Leader`çš„è¯·æ±‚ï¼Œå®ƒä¼šå˜æˆä¸€ä¸ª`Candidate`ç„¶åå‘èµ·ä¸€è½®é€‰ä¸¾ï¼›
- è·å¾—å¤§å¤šæ•°é€‰ç¥¨çš„`Candidate`å°†æˆä¸ºæ–°çš„`Leader`
- é€šå¸¸æƒ…å†µä¸‹ï¼Œ**é™¤éå‘ç”Ÿæ•…éšœï¼Œå¦åˆ™åœ¨ä»»çš„**`**Leader**`**ä¸ä¼šä¸»åŠ¨æ”¾å¼ƒ**`**Leader**`**èº«ä»½**ã€‚
### ä»»æœŸï¼ˆ`Term`ï¼‰
`Raft`ç®—æ³•ï¼Œä½œä¸ºä¸€ä¸ªç”±`Leader`å¼•é¢†çš„å¼ºä¸€è‡´æ€§ç®—æ³•ï¼Œå¼•å…¥äº†â€œä»»æœŸâ€ï¼ˆ`Term`ï¼‰çš„æ¦‚å¿µã€‚`Term`çš„å˜åŒ–ååº”äº†`Leader`çš„å˜åŒ–ï¼Œæ¯ä¸ª`Term`çš„å¼€å§‹éƒ½ä¼´éšç€`Leader`çš„é€‰ä¸¾ã€‚ä¸€æ—¦`Leader`æˆåŠŸå½“é€‰ï¼Œå®ƒå°†åœ¨æ•´ä¸ª`Term`æœŸé—´è´Ÿè´£ç®¡ç†æ•´ä¸ªé›†ç¾¤ã€‚`Term`é€šè¿‡**å•è°ƒé€’å¢**çš„æ•°å­—æ¥è¡¨ç¤ºï¼Œç¡®ä¿äº†æˆ‘ä»¬èƒ½å¤Ÿæ¸…æ™°åœ°åŒºåˆ†ä¸åŒçš„é¢†å¯¼å‘¨æœŸã€‚![Raft-ç¬¬ 3 é¡µ.drawio.svg](https://raw.githubusercontent.com/danmuking/image/main/613812f6ca6873d9bf7e0400f02f234d.svg)
> ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†æ¶ˆæ¯æ˜¯ç”±å“ªä»»`Leader`å‘å‡ºçš„å‘¢ï¼Ÿå‰é¢ä¸æ˜¯è¯´åŒä¸€ä¸ªæ—¶åˆ»åªå­˜åœ¨ä¸€ä¸ª`Leader`å—ï¼Ÿç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°ï¼Œæ¶ˆæ¯åœ¨ç½‘ç»œä¸­ä¼ é€’æ˜¯éœ€è¦æ—¶é—´çš„ã€‚æœ‰å¯èƒ½åœ¨æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œå½“å‰çš„`Leader`å‡ºç°äº†é—®é¢˜ï¼Œå¹¶ä¸”å®Œæˆäº†æ–°`Leader`çš„é€‰ä¸¾ï¼Œé‚£ä¹ˆå½“æ¶ˆæ¯åˆ°è¾¾æ—¶ï¼Œå½“å‰`Leader`å°±å·²ç»ä¸æ˜¯å‘é€æ¶ˆæ¯çš„`Leader`äº†ã€‚ç”Ÿæ´»å°±æ˜¯è¿™æ ·å‡ºå¤„å……æ»¡æƒŠå–œã€‚

![image.png](https://raw.githubusercontent.com/danmuking/image/main/a80f62aefa30ab46363728a78bdf2489.png)

é€šè¿‡ä¸Šé¢è¿™éƒ¨åˆ†ï¼Œç°åœ¨å¯¹äº`Raft`çš„åè¯ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œæ¥ä¸‹æ¥ï¼Œå°±æ˜¯`Raft`ç®—æ³•çš„**é‡å¤´æˆ**ï¼Œ`Raft`æ˜¯**å¦‚ä½•ä¿è¯åŒä¸€ä»½æ•°æ®åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šçš„ä¸€è‡´æ€§çš„**å‘¢ï¼Ÿè¿™ä¸»è¦ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š

1. åŒä¸€ä¸ªæ—¶åˆ»æœ€å¤šåªå…è®¸å­˜åœ¨ä¸€ä¸ª`Leader`ï¼Œä¿è¯å®¢æˆ·ç«¯åªä¼šä¸åŒä¸€ä¸ª`Leader`è¿›è¡Œäº¤äº’ã€‚
2. å®¢æˆ·ç«¯æäº¤çš„å˜æ›´æ“ä½œéœ€è¦ç”±`Leader`åŒæ­¥ç»™æ‰€æœ‰`Follower`ï¼Œ`Leader`ç°å°†æ“ä½œè®°å…¥æ—¥å¿—ï¼Œåªæœ‰åŠæ•°ä»¥ä¸Šçš„`Follower`è¿”å›`ACK`åï¼Œ`Leader`æ‰å°†è¯¥æ—¥å¿—æäº¤ï¼Œå¹¶å‘å®¢æˆ·ç«¯è¿”å›æˆåŠŸã€‚

è¿™å…¶ä¸­å°±åŒ…å«ä¸¤ä¸ªé‡è¦çš„é—®é¢˜ï¼š

1. **å¦‚ä½•ä¿è¯åŒä¸€æ—¶åˆ»åªå­˜åœ¨ä¸€ä¸ª**`**Leader**`
2. `**Leader**`**å¦‚ä½•å°†æ•°æ®åŒæ­¥ç»™æ‰€æœ‰**`**Follower**`

æ­¤å¤–ï¼Œ`Raft`è¿˜é¢å¤–å¼•å…¥äº†ä¸€äº›é™åˆ¶æ¥ä¿è¯ç®—æ³•çš„**å®‰å…¨æ€§**ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸ªè¿›è¡Œåˆ†æã€‚
### `Leader`é€‰ä¸¾
`Raft` ä½¿ç”¨å¿ƒè·³ï¼ˆ`heartbeat`ï¼‰è§¦å‘`Leader`é€‰ä¸¾ã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹`Leader`å‘æ‰€æœ‰`Followers`å‘¨æœŸæ€§å‘é€`heartbeat`ã€‚å¦‚æœ`Follower`åœ¨é€‰ä¸¾è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°`Leader`çš„`heartbeat`ï¼Œå°±å°†è®¤ä¸ºå½“å‰`Leader`å·²ç»ä¸‹çº¿ï¼Œéœ€è¦å‘èµ·ä¸€æ¬¡`Leader`é€‰ä¸¾ã€‚
`Follower`é¦–å…ˆä¼šå°†å½“å‰`Term`åŠ ä¸€ï¼Œç„¶åè½¬æ¢ä¸º`Candidate`è§’è‰²ã€‚å®ƒ**é¦–å…ˆç»™è‡ªå·±æŠ•ç¥¨**å¹¶ä¸”è¦æ±‚å…¶ä»–èŠ‚ç‚¹è¿›è¡ŒæŠ•ç¥¨ï¼Œåœ¨ä¸€æ¬¡é€‰ä¸¾ä¸­ï¼Œ**æ¯ä¸ªèŠ‚ç‚¹åªèƒ½è¿›è¡Œä¸€æ¬¡æŠ•ç¥¨**ã€‚
#### æŠ•ç¥¨è§„åˆ™
èŠ‚ç‚¹æŠ•ç¥¨éœ€è¦éµå®ˆä¸¤ä¸ªè§„åˆ™ï¼š

1. **å…ˆåˆ°å…ˆå¾—**ï¼Œè°å…ˆè¯·æ±‚å°±æŠŠç¥¨æŠ•ç»™è°
2. **åªæœ‰è¯·æ±‚æŠ•ç¥¨çš„èŠ‚ç‚¹çš„æ—¥å¿—è¿›åº¦ä¸è½åäºå½“å‰èŠ‚ç‚¹çš„æ—¥å¿—è¿›åº¦ï¼Œæ‰è¿›è¡ŒæŠ•ç¥¨**ï¼Œå¦åˆ™å¿½ç•¥è¯·æ±‚ã€‚å…·ä½“è§„åˆ™ä¼šåœ¨ä¹‹åè¿›ä¸€æ­¥è¯¦ç»†è¯´æ˜ã€‚
> ä¸ºä»€ä¹ˆè¦æœ‰`2.`è¿™ä¸ªé™åˆ¶å‘¢ï¼Ÿ
> å‰é¢æåˆ°äº†ï¼Œæ—¥å¿—åªæœ‰è¢«åŒæ­¥åˆ°åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹åæ‰ä¼šæäº¤ï¼Œå› æ­¤é›†ç¾¤ä¸­**ä¸€å®šæœ‰åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹å…·æœ‰**æœ€æ–°çš„æ—¥å¿—ï¼Œ`2.`èƒ½å¤Ÿä¿è¯é€‰å‡ºçš„`Leader`ä¸€å®šå«æœ‰æœ€æ–°çš„æ•°æ®ã€‚æ‰€ä»¥`Raft`ä¸­çš„`Leader`ä¸€å®šæ˜¯åŒ…å«å·²ç»æäº¤çš„å…¨é‡æ•°æ®ã€‚è¿™å¯ä»¥é¿å…`Leader`è¦†ç›–å·²ç»æäº¤çš„æ•°æ®

éœ€è¦è·å¾—â€œå¤§å¤šæ•°é€‰ç¥¨â€è¿™ä¸€é™åˆ¶æ¡ä»¶ï¼Œå†³å®šäº†æœ€å¤šåªä¼šæœ‰ä¸€ä¸ª`Candidate`èµ¢å¾—é€‰ä¸¾ ã€‚
æŠ•ç¥¨ç»“æœæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š

- è¯¥èŠ‚ç‚¹èµ¢å¾—äº†å¤šæ•°çš„é€‰ç¥¨ï¼ŒæˆåŠŸé€‰ä¸¾ä¸º`Leader`ï¼›
- è¯¥èŠ‚ç‚¹æ”¶åˆ°äº†æ–°`Leader`çš„æ¶ˆæ¯ï¼Œè¡¨ç¤ºæœ‰å…¶å®ƒæœåŠ¡å™¨å·²ç»æŠ¢å…ˆå½“é€‰äº†`Leader`ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ ¹æ®`Term`æ¥åˆ¤æ–­è¿™ä¸ª`Leader`çš„åˆæ³•æ€§ï¼ˆè¿™ä¸ªåˆæ³•æ€§åªæ˜¯å¯¹äºå½“å‰èŠ‚ç‚¹æ¥è¯´ï¼Œå°±ç®—å½“å‰èŠ‚ç‚¹è®¤ä¸º`Leader`ä¸åˆæ³•ï¼Œä½†æ˜¯åªè¦åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹åŒæ„ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹ä»ç„¶æ˜¯`Leader`ï¼‰ï¼Œå¦‚æœè¿™ä¸ª `Leader`çš„ä»»æœŸ`Term`ï¼š
   1. **å¤§äºç­‰äº**è¿™ä¸ª`Candidate`çš„`Term`ï¼šé‚£è¯¥`Candidate`å°±æ‰¿è®¤è¿™ä¸ª`Leader`æ˜¯åˆæ³•çš„ï¼Œç„¶åå›å½’åˆ°`Follower`çŠ¶æ€ã€‚
   2. **å°äº**è¿™ä¸ª`Candidate`çš„`Term`ï¼šæ‹’ç»è¿™ä¸ªé€šçŸ¥ï¼Œä»ç„¶ç•™åœ¨`Candidate`çŠ¶æ€ã€‚
- æ²¡æœ‰æœåŠ¡å™¨èµ¢å¾—å¤šæ•°çš„é€‰ç¥¨ï¼Œ`Leader`é€‰ä¸¾å¤±è´¥ï¼Œç­‰å¾…é€‰ä¸¾æ—¶é—´è¶…æ—¶åå‘èµ·ä¸‹ä¸€æ¬¡é€‰ä¸¾ã€‚**å¦‚æœæ²¡æœ‰é¢å¤–çš„é¢„é˜²æªæ–½ï¼Œè¿™ç§æŠ•ç¥¨åˆ†è£‚çš„æƒ…å†µå¯èƒ½ä¼šæ— é™æŒç»­ä¸‹å»**ã€‚å› æ­¤éœ€è¦ä¸€äº›é¢å¤–çš„å¤„ç†ã€‚
#### é¿å…æ— é™å¾ªç¯çš„æŠ•ç¥¨åˆ†è£‚ï¼šéšæœºé€‰ä¸¾è¶…æ—¶
åœ¨æŠ•ç¥¨è¿‡ç¨‹ä¸­æœ‰è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå¦‚æœé›†ç¾¤ä¸­æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œåœ¨æŸä¸ªæ—¶åˆ»ï¼Œ`Leader`ä¸‹çº¿ï¼Œä¸‰ä¸ªèŠ‚ç‚¹åŒæ—¶å¼€å§‹é€‰ä¸¾ï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå…ˆç»™è‡ªå·±ä¸€ç¥¨ï¼Œæ²¡æœ‰ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥è·å¾—åŠæ•°ä»¥ä¸Šçš„é€‰ç¥¨ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¶…æ—¶ï¼Œç„¶åå¼€å§‹åˆåŒæ—¶å¼€å§‹ç¬¬äºŒè½®é€‰ä¸¾ï¼ŒåˆæŠ•è‡ªå·±ä¸€ç¥¨ã€‚ç„¶åç¬¬ä¸‰è½®ã€ç¬¬å››è½®...
ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œ`Raft`ä½¿ç”¨**éšæœºé€‰ä¸¾è¶…æ—¶**æ¥ç¡®ä¿æŠ•ç¥¨åˆ†è£‚**åªä¼šéå¸¸å¶ç„¶åœ°å‘ç”Ÿï¼Œå¹¶ä¸”å‘ç”Ÿä¹‹åèƒ½å¾ˆå¿«æ¢å¤æ­£å¸¸**ã€‚åœ¨è®¾ç½®è¶…æ—¶æ—¶é—´çš„æ—¶å€™ï¼Œä¼šä»ä¸€ä¸ªåŒºé—´å†…**éšæœºé€‰æ‹©ä¸€ä¸ªè¶…æ—¶æ—¶é—´**ï¼Œè®©èŠ‚ç‚¹çš„è¶…æ—¶æ—¶é—´åˆ†æ•£ï¼Œé¿å…ä¸Šè¿°æƒ…å†µçš„å‘ç”Ÿã€‚
### æ—¥å¿—åŒæ­¥
`Leader`é€‰å‡ºåï¼Œå°±å¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚`Leader`æŠŠè¯·æ±‚ä½œä¸ºæ—¥å¿—æ¡ç›®åŠ å…¥åˆ°å®ƒçš„æ—¥å¿—ä¸­ï¼ˆæ³¨æ„ï¼Œè¿™æ—¶å€™æ²¡æœ‰æäº¤ï¼‰ï¼Œç„¶åå¹¶è¡Œçš„å‘`Follower`å¤åˆ¶è¿™æ¡æ—¥å¿—ã€‚å½“è¿™æ¡æ—¥å¿—è¢«å¤åˆ¶åˆ°å¤§å¤šæ•°æœåŠ¡å™¨ä¸Šï¼Œ`Leader`å°†è¿™æ¡æ—¥å¿—æäº¤å¹¶å‘å®¢æˆ·ç«¯è¿”å›æ‰§è¡Œç»“æœã€‚![Raft.drawio.svg](https://raw.githubusercontent.com/danmuking/image/main/604036eceb3a30c73743149ab73575ef.svg)
æŸäº›`Followers`å¯èƒ½æ²¡æœ‰æˆåŠŸçš„å¤åˆ¶æ—¥å¿—ï¼Œ`Leader`ä¼š**æ— é™çš„é‡è¯•**ç›´åˆ°æ‰€æœ‰çš„`Followers`æœ€ç»ˆå­˜å‚¨äº†æ‰€æœ‰çš„æ—¥å¿—æ¡ç›®ã€‚
#### æ—¥å¿—çš„ç»“æ„
æ—¥å¿—ç”±æœ‰åºç¼–å·ï¼ˆ`log index`ï¼‰çš„æ—¥å¿—æ¡ç›®ç»„æˆã€‚æ¯ä¸ªæ—¥å¿—æ¡ç›®åŒ…å«å®ƒè¢«åˆ›å»ºæ—¶çš„ä»»æœŸå·ï¼ˆ`Term`ï¼‰å’Œå†…å®¹ã€‚å¦‚æœä¸€ä¸ªæ—¥å¿—æ¡ç›®è¢«å¤åˆ¶åˆ°å¤§å¤šæ•°æœåŠ¡å™¨ä¸Šï¼Œå°±è¢«è®¤ä¸ºå¯ä»¥æäº¤ï¼ˆ`commit`ï¼‰äº†ã€‚è¿™é‡Œç›´æ¥å¼•ç”¨åŸè®ºæ–‡çš„å›¾
![](https://raw.githubusercontent.com/danmuking/image/main/0380a92dba8e0db5a02329dfbb70d287.webp)
`Raft`æ—¥å¿—åŒæ­¥ä¿è¯å¦‚ä¸‹ä¸‰ç‚¹ï¼š

- å¦‚æœä¸åŒæ—¥å¿—ä¸­çš„ä¸¤ä¸ªæ¡ç›®æœ‰ç€ç›¸åŒçš„ç´¢å¼•å’Œä»»æœŸå·ï¼Œåˆ™å®ƒä»¬æ‰€å­˜å‚¨çš„å‘½ä»¤æ˜¯ç›¸åŒçš„ã€‚
- å¦‚æœä¸åŒæ—¥å¿—ä¸­çš„ä¸¤ä¸ªæ¡ç›®æœ‰ç€ç›¸åŒçš„ç´¢å¼•å’Œä»»æœŸå·ï¼Œåˆ™å®ƒä»¬ä¹‹å‰çš„æ‰€æœ‰æ¡ç›®éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚
- `Leader`ç»**ä¸ä¼šè¦†ç›–æˆ–åˆ é™¤è‡ªå·±çš„æ—¥å¿—**ï¼Œåªä¼šè¿½åŠ  ï¼ˆ**Leader Append-Only**ï¼‰

ç¬¬ä¸€æ¡ç‰¹æ€§æºäº`Leader`åœ¨ä¸€ä¸ª`Term`å†…åœ¨ç»™å®šçš„ä¸€ä¸ª`log index`æœ€å¤šåˆ›å»ºä¸€æ¡æ—¥å¿—æ¡ç›®ï¼ŒåŒæ—¶è¯¥æ¡ç›®åœ¨æ—¥å¿—ä¸­çš„ä½ç½®ä¹Ÿä»æ¥ä¸ä¼šæ”¹å˜ã€‚
ç¬¬äºŒæ¡ç‰¹æ€§æºäºåŒæ­¥æ—¥å¿—æ—¶çš„ä¸€ä¸ªç®€å•çš„ä¸€è‡´æ€§æ£€æŸ¥ã€‚å½“å‘é€ä¸€ä¸ªåŒæ­¥æ—¥å¿—è¯·æ±‚æ—¶ï¼Œ`Leader`ä¼šæŠŠæ–°æ—¥å¿—æ¡ç›®ç´§æ¥ç€ä¹‹å‰çš„æ¡ç›®çš„`log index`å’Œ`Term`éƒ½åŒ…å«åœ¨é‡Œé¢ã€‚å¦‚æœ`Follower`æ²¡æœ‰åœ¨å®ƒçš„æ—¥å¿—ä¸­æ‰¾åˆ°`log index`å’Œ`Term`éƒ½ç›¸åŒçš„æ—¥å¿—ï¼Œå®ƒå°±ä¼šæ‹’ç»æ–°çš„æ—¥å¿—æ¡ç›®ã€‚
ç¬¬ä¸‰æ¡ç‰¹æ€§æ˜¯å› ä¸ºé€‰ä¸¾æ—¶çš„é™åˆ¶ï¼Œæ ¹æ®å‰é¢æåˆ°çš„æŠ•ç¥¨è§„åˆ™ï¼Œæˆä¸º`Leader`çš„ç»“ç‚¹é‡Œçš„æ—¥å¿—ä¸€å®šæ‹¥æœ‰æ‰€æœ‰å·²è¢«å¤šæ•°èŠ‚ç‚¹æ‹¥æœ‰çš„æ—¥å¿—æ¡ç›®ï¼Œæ‰€ä»¥å…ˆå‰çš„æ—¥å¿—æ¡ç›®å¾ˆå¯èƒ½å·²ç»è¢«æäº¤ï¼Œå› æ­¤ä¸å¯ä»¥åˆ é™¤ä¹‹å‰çš„æ—¥å¿—ã€‚
#### æ—¥å¿—ä¸ä¸€è‡´çš„åœºæ™¯
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ`Leader`å’Œ`Followers`çš„æ—¥å¿—ä¿æŒä¸€è‡´ï¼Œå› æ­¤æ—¥å¿—åŒæ­¥æ—¶çš„ä¸€è‡´æ€§æ£€æŸ¥é€šå¸¸ä¸ä¼šå¤±è´¥ã€‚ç„¶è€Œï¼Œ`Leader`å´©æºƒå¯èƒ½ä¼šå¯¼è‡´æ—¥å¿—ä¸ä¸€è‡´ï¼šæ—§çš„`Leader`å¯èƒ½æ²¡æœ‰å®Œå…¨å¤åˆ¶å®Œæ—¥å¿—ä¸­çš„æ‰€æœ‰æ¡ç›®ã€‚
![](https://raw.githubusercontent.com/danmuking/image/main/9734fc0a337b5f5d3809a57ef8317597.webp)
ä¸Šå›¾é˜è¿°äº†ä¸€äº›`Followers`å¯èƒ½å’Œæ–°çš„`Leader`æ—¥å¿—ä¸åŒçš„æƒ…å†µã€‚ä¸€ä¸ª`Follower`å¯èƒ½ä¼šä¸¢å¤±æ‰`Leader`ä¸Šçš„ä¸€äº›æ¡ç›®ï¼Œä¹Ÿæœ‰å¯èƒ½åŒ…å«ä¸€äº›`Leader`æ²¡æœ‰çš„æ¡ç›®ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸¤è€…éƒ½ä¼šå‘ç”Ÿã€‚ä¸¢å¤±çš„æˆ–è€…å¤šå‡ºæ¥çš„æ¡ç›®å¯èƒ½ä¼šæŒç»­å¤šä¸ªä»»æœŸã€‚
`**Leader**`**é€šè¿‡å¼ºåˆ¶**`**Followers**`**å¤åˆ¶å®ƒçš„æ—¥å¿—æ¥å¤„ç†æ—¥å¿—çš„ä¸ä¸€è‡´ï¼Œ**`**Followers**`**ä¸Šçš„ä¸ä¸€è‡´çš„æ—¥å¿—ä¼šè¢«**`**Leader**`**çš„æ—¥å¿—è¦†ç›–ã€‚**
`Leader`ä¸ºäº†ä½¿`Followers`çš„æ—¥å¿—åŒè‡ªå·±çš„ä¸€è‡´ï¼Œ`Leader`éœ€è¦æ‰¾åˆ°`Followers`åŒå®ƒçš„æ—¥å¿—ä¸€è‡´çš„åœ°æ–¹ï¼Œç„¶åè¦†ç›–`Followers`åœ¨è¯¥ä½ç½®ä¹‹åçš„æ¡ç›®ã€‚
`Leader`ä¼šæœ€æ–°çš„æ—¥å¿—ä½ç½®å¾€å‰è¯•ï¼Œæ¯æ¬¡åŒæ­¥æ—¥å¿—å¤±è´¥åå°è¯•å‰ä¸€ä¸ªæ—¥å¿—æ¡ç›®ï¼Œç›´åˆ°æˆåŠŸæ‰¾åˆ°æ¯ä¸ª`Follower`çš„æ—¥å¿—ä¸€è‡´ä½ç‚¹ï¼Œç„¶åå‘åé€æ¡è¦†ç›–`Followers`åœ¨è¯¥ä½ç½®ä¹‹åçš„æ¡ç›®ã€‚
### å®‰å…¨
å‰é¢ä»‹ç»äº† `Raft` å¦‚ä½•é€‰ä¸¾`Leader`åŠå¦‚ä½•åŒæ­¥æ—¥å¿—ã€‚ä½†æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢**å·²ç»æè¿°çš„é‚£äº›æœºåˆ¶ï¼Œè¿˜ä¸è¶³ä»¥ç¡®ä¿**`Leader`**ä¸ä¼šè¦†ç›–æˆ–åˆ é™¤è‡ªå·±çš„æ—¥å¿—**ã€‚
`Raft`é¢å¤–å¢åŠ äº†å¦‚ä¸‹ä¸¤æ¡é™åˆ¶ä»¥ä¿è¯å®‰å…¨æ€§ï¼š

- **æ‹¥æœ‰æœ€æ–°çš„å·²æäº¤çš„æ—¥å¿—çš„**`**Follower**`**æ‰æœ‰èµ„æ ¼æˆä¸º**`**Leader**`ï¼Œè¿™ä¸€ç‚¹å®é™…ä¸Šåœ¨å‰é¢å·²ç»æåˆ°ï¼Œåœ¨è¿™é‡Œå¯¹å®ƒè¿›è¡Œæ›´è¯¦ç»†çš„è¯´æ˜ã€‚

è¿™ä¸ªä¿è¯æ˜¯åœ¨æŠ•ç¥¨æ—¶å®ç°çš„ï¼Œ`Candidate`åœ¨è¯·æ±‚å…¶ä»–èŠ‚ç‚¹æŠ•ç¥¨æ—¶ï¼Œè¦å¸¦ä¸Šè‡ªå·±çš„æœ€åä¸€æ¡æ—¥å¿—çš„`Term`å’Œ`log index`ï¼Œå…¶ä»–èŠ‚ç‚¹æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œå¦‚æœå‘ç°è‡ªå·±çš„æ—¥å¿—æ¯”è¯·æ±‚ä¸­æºå¸¦çš„æ–°ï¼Œåˆ™æ‹’ç»æŠ•ç¥¨ã€‚
æ—¥å¿—æ¯”è¾ƒæœ‰ä¸¤ä¸ªåŸåˆ™ï¼š

   1. å¦‚æœæœ¬åœ°çš„æœ€åä¸€æ¡`log entry`çš„`Term`æ›´å¤§ï¼Œåˆ™`Term`å¤§çš„æ›´æ–°ï¼Œ
   2. å¦‚æœ`Term`ä¸€æ ·å¤§ï¼Œåˆ™`log index`æ›´å¤§çš„æ›´æ–°ã€‚
- `**Leader**`**åªèƒ½æäº¤è‡ªå·±ä»»æœŸå†…çš„æ—¥å¿—**ï¼Œå¦‚æœå­˜åœ¨ä¹‹å‰ä»»æœŸçš„æ—¥å¿—ï¼Œåªèƒ½é€šè¿‡æäº¤å½“æœŸä»»æœŸçš„æ—¥å¿—æ¥é—´æ¥æäº¤ã€‚

ä¹‹æ‰€ä»¥è¦è¿™æ ·ï¼Œæ˜¯å› ä¸ºå¯èƒ½ä¼šå‡ºç°å·²æäº¤çš„æ—¥å¿—åˆè¢«è¦†ç›–çš„æƒ…å†µï¼Œæ¥çœ‹çœ‹ä¸‹é¢è¿™ç§æƒ…å†µï¼š![Raft-ç¬¬ 4 é¡µ.drawio.svg](https://raw.githubusercontent.com/danmuking/image/main/a5a122869fb6ae0a0aa3ad0f18d36ee9.svg)

1. åœ¨é˜¶æ®µ`a`ï¼Œ`Term`ä¸º2ï¼Œ`S1`æ˜¯`Leader`ï¼Œä¸”`S1`å†™å…¥æ—¥å¿—ï¼ˆterm, indexï¼‰ä¸º(2, 2)ï¼Œå¹¶ä¸”æ—¥å¿—è¢«åŒæ­¥ï¼ˆæ²¡æäº¤ï¼‰å†™å…¥äº†`S2`ï¼›
2. åœ¨é˜¶æ®µ`b`ï¼Œ`S1`ä¸‹çº¿ï¼Œè§¦å‘ä¸€æ¬¡æ–°çš„é€‰ä¸»ï¼Œæ­¤æ—¶`S5`è¢«é€‰ä¸ºæ–°çš„`Leader`ï¼Œæ­¤æ—¶ç³»ç»Ÿ`Term`ä¸º3ï¼Œä¸”å†™å…¥äº†æ—¥å¿—ï¼ˆterm, indexï¼‰ä¸ºï¼ˆ3ï¼Œ 2ï¼‰;
3. `S5`å°šæœªå°†æ—¥å¿—æ¨é€åˆ°`Followers`å°±ç¦»çº¿äº†ï¼Œè¿›è€Œè§¦å‘äº†ä¸€æ¬¡æ–°çš„é€‰ä¸»ï¼Œè€Œä¹‹å‰ç¦»çº¿çš„`S1`ç»è¿‡é‡æ–°ä¸Šçº¿åè¢«é€‰ä¸­å˜æˆ`Leader`ï¼Œæ­¤æ—¶ç³»ç»Ÿ`Term`ä¸º4ï¼Œæ­¤æ—¶`S1`ä¼šå°†è‡ªå·±çš„æ—¥å¿—åŒæ­¥åˆ°`Followers`ï¼ŒæŒ‰ç…§ä¸Šå›¾å°±æ˜¯å°†æ—¥å¿—ï¼ˆ2ï¼Œ 2ï¼‰åŒæ­¥åˆ°äº†`S3`ï¼Œè€Œæ­¤æ—¶ç”±äºè¯¥æ—¥å¿—å·²ç»è¢«åŒæ­¥åˆ°äº†å¤šæ•°èŠ‚ç‚¹ï¼ˆ`S1`, `S2`, `S3`ï¼‰ï¼Œå› æ­¤ï¼Œæ­¤æ—¶æ—¥å¿—ï¼ˆ2ï¼Œ2ï¼‰è¢«æäº¤äº†ã€‚
4. åœ¨é˜¶æ®µ`d`ï¼Œ`S1`åˆä¸‹çº¿äº†ï¼Œè§¦å‘ä¸€æ¬¡é€‰ä¸»ï¼Œè€Œ`S5`æœ‰å¯èƒ½è¢«é€‰ä¸ºæ–°çš„`Leader`ï¼ˆè¿™æ˜¯å› ä¸º`S5`å¯ä»¥æ»¡è¶³ä½œä¸ºä¸»çš„ä¸€åˆ‡æ¡ä»¶ï¼š1. `Term` = 5 > 4ï¼Œ2. æœ€æ–°çš„æ—¥å¿—ä¸ºï¼ˆ3ï¼Œ2ï¼‰ï¼Œæ¯”å¤§å¤šæ•°èŠ‚ç‚¹ï¼ˆå¦‚`S2`/`S3``/S4`çš„æ—¥å¿—éƒ½æ–°ï¼‰ï¼Œç„¶å`S5`ä¼šå°†è‡ªå·±çš„æ—¥å¿—æ›´æ–°åˆ°`Followers`ï¼Œäºæ˜¯`S2`ã€`S3`ä¸­å·²ç»è¢«æäº¤çš„æ—¥å¿—ï¼ˆ2ï¼Œ2ï¼‰è¢«æˆªæ–­äº†ã€‚è¿™å°±è¿èƒŒäº†`Raft`ç®—æ³•å·²æäº¤æ—¥å¿—ä¸èƒ½è¢«ä¿®æ”¹çš„è¦æ±‚ã€‚

å¢åŠ ä¸Šè¿°é™åˆ¶åï¼Œå³ä½¿æ—¥å¿—ï¼ˆ2ï¼Œ2ï¼‰å·²ç»è¢«å¤§å¤šæ•°èŠ‚ç‚¹ï¼ˆ`S1`ã€`S2`ã€`S3`ï¼‰ç¡®è®¤äº†ï¼Œä½†æ˜¯å®ƒä¸èƒ½è¢«æäº¤ï¼Œå› ä¸ºå®ƒæ˜¯æ¥è‡ªä¹‹å‰`Term`ï¼ˆ2ï¼‰çš„æ—¥å¿—ï¼Œç›´åˆ°`S1`åœ¨å½“å‰`Term`ï¼ˆ4ï¼‰äº§ç”Ÿçš„æ—¥å¿—ï¼ˆ4ï¼Œ 4ï¼‰è¢«å¤§å¤šæ•°`Followers`ç¡®è®¤ï¼Œè§`e`ï¼Œ`S1`æ–¹å¯æäº¤æ—¥å¿—ï¼ˆ4ï¼Œ4ï¼‰è¿™æ¡æ—¥å¿—ï¼Œå½“ç„¶ï¼Œæ ¹æ®`Raft`å®šä¹‰ï¼Œï¼ˆ4ï¼Œ4ï¼‰ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—ä¹Ÿä¼šè¢«æäº¤ã€‚æ­¤æ—¶å³ä½¿`S1`å†ä¸‹çº¿ï¼Œé‡æ–°é€‰ä¸»æ—¶`S5`ä¸å¯èƒ½æˆä¸º`Leader`ï¼Œå› ä¸ºå®ƒæ²¡æœ‰åŒ…å«å¤§å¤šæ•°èŠ‚ç‚¹å·²ç»æ‹¥æœ‰çš„æ—¥å¿—ï¼ˆ4ï¼Œ4ï¼‰ã€‚
## ç‚¹å…³æ³¨ï¼Œä¸è¿·è·¯
> å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¦‚æœä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œ**éå¸¸æ„Ÿè°¢ä½ çš„æ”¯æŒï¼**
> å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å†™çš„è¿˜ä¸é”™ï¼Œ æ±‚**ç‚¹èµ**ğŸ‘ æ±‚**å…³æ³¨**â¤ï¸ æ±‚**åˆ†äº«**ğŸ‘¥ å¯¹æš–ç”·æˆ‘æ¥è¯´çœŸçš„ **éå¸¸æœ‰ç”¨ï¼ï¼ï¼**
> ç™½å«–ä¸å¥½ï¼Œåˆ›ä½œä¸æ˜“ï¼Œå„ä½çš„æ”¯æŒå’Œè®¤å¯ï¼Œå°±æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« è§ï¼
> å¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·æ‰¹è¯„æŒ‡æ•™ï¼Œä¸èƒœæ„Ÿæ¿€ ï¼

> æœ€åæ¨èæˆ‘çš„**IMé¡¹ç›®DiTing**ï¼ˆ[https://github.com/danmuking/DiTing-Go](https://github.com/danmuking/DiTing-Go)ï¼‰ï¼Œè‡´åŠ›äºæˆä¸ºä¸€ä¸ªåˆå­¦è€…å‹å¥½ã€æ˜“äºä¸Šæ‰‹çš„ IM è§£å†³æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½ç»™ä½ çš„å­¦ä¹ ã€é¢è¯•å¸¦æ¥ä¸€ç‚¹å¸®åŠ©ï¼Œå¦‚æœäººæ‰ä½ å–œæ¬¢ï¼Œç»™ä¸ªStarâ­å­ï¼

## å‚è€ƒèµ„æ–™
[https://www.cnblogs.com/yrxing/p/16041954.html](https://www.cnblogs.com/yrxing/p/16041954.html)
[https://www.qin.news/Raft/](https://www.qin.news/raft/)
[https://zhuanlan.zhihu.com/p/32052223](https://zhuanlan.zhihu.com/p/32052223)
