# MySQL的页结构

## 随便聊聊

> 在上一篇文章[《揭秘MySQL数据布局：探索记录结构的奥秘》](MySQL%E7%9A%84%E8%AE%B0%E5%BD%95%E7%BB%93%E6%9E%84.md)我们讲到了 MYSQL 中每一条记录的结构，那么在 MySQL 中，数据也是按照记录为单位存放在硬盘上的吗？如果 MySQL 以记录为单位进行存放，那么当我们每访问一条记录我们就需要进行一次磁盘 io。我们都知道，相对于内存来说，磁盘的速度是非常慢的。而一次查询我们可能需要读取成千上万乃至几十万条记录，也就需要几十万次 io，这将极大的限制MySQL的性能。因此 MySQL 需要一个新的，更加优雅的数据组织结构：页。

## 记录在页中是如何存储的

### 页是什么？

简单点来说，页实际上就是若干条记录所组成的一个更大的集合。使用这个大集合来操作数据有什么好处呢？
在计算机中，有两个非常重要的假设：

1. 空间局部性：一旦某个存储单元被访问，其附近的存储单元也很有可能将被访问。这是因为数据通常是以数组、表为结构进行存储，而我们对数据的操作通常是连贯的，程序操作数据的方式通常也是通过循环来访问连续的数据。
2. 时间局部性：如果某数据被访问过，不久以后该数据可能再次被访问。

根据这两条假设，如果某一条记录被访问到，那么我们就可以将这条记录左右的若干条记录一次性加载到内存里面，反正这些数据有非常大的可能会被访问到，不如直接梭哈，单车换摩托就在此刻。
> 可能有的同学会不理解，如果同样读取10条记录，采用页来读取记录和直接读取记录，好像最终都是要访问相同大小的磁盘存储单元，甚至于页中还需要保存额外的存储信息，读取页所需要访问的存储单元数量应该大于直接访问对应的记录，为什么访问页能够提高 io 性能？
> 这是由于同一页的数据在磁盘上是连续存储的，访问页进行的是顺序 io，而10条记录在磁盘上就不一定连续了，进行的是随机 io。对于磁盘来说，顺序 io 的速度比随机 io 更快。

## 页目录

## 页面头部、文件头部和文件尾部